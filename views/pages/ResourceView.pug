extends ../components/_templateBase

block append scripts
    script(src='/js/resource.js')
           
block content
    +breadcrumbDisplay([['Home','/home'],['Resources']])
    h2 Resources
    .container
        .row
            .col-md-6.m-auto
                h1.my-4 Resources
                form(action="/resources/upload" method="post" enctype="multipart/form-data")
                    .custom-file.mb-3
                        input.custom-file-input#file(type="file" name="file")
                        label#file-label(for="file" class="custom-file-label") Choose Stuff
                    input.btn.btn-primary.btn-block( type= "submit" value="Submit")   
                hr
                
                if files
                    
                    each file in files
                        br
                        .card
                            .h5.card-header.bg-info.text-white= file.filename
                            .card-body
                                .h6.card-title= ""
                                if file.isImage
                                    img(src=`/resources/image/${file.filename}`, width="250", alt="", class="img-responsive")
                                .card-subtitle.mb-2
                                    small.text-muted= `Uploaded by: ${file.user.firstName} ${file.user.lastName}`
                                    br
                                    -const updateDate = moment(file.uploadDate).format('dddd DD MMM YYYY HH:mm')
                                    small.text-muted= `Upload date: ${updateDate}`
                            .card-footer
                                a.btn.btn-primary( href= `/resources/files/${file.filename}`) Download
                                hr
                                //- if userFilesIds.includes(file._id.toString())
                                -if (user._id == file.user.id)
                                    form(action=`/resources/files/del/${file._id}` method="post")
                                        button.btn.btn-danger(type="submit") Remove   
                       
                else
                    |No files to show 

    

