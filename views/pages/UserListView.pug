extends ../components/_templateBase

block append head
    link(rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css")
    link(rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css")
    

block append scripts
    script(src='https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js')
    script(src='https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js')
    script(src='/js/databaseDesignJQuerry.js')
           
block content
    +breadcrumbDisplay([['Home','/home'],['Manage Users']])
    
    .d-flex
        h2 Manage Users
        a.btn.btn-primary.text-white.mb-auto.ml-auto(href=`/manage_users/new_user`) + Create User
        
    -if(users.length<1)
        h4.font-weight-bold.text-dark.mt-0.ml-4 No users in the system.
    - else
    
        table.table#dataTable.table.table-striped.table-bordered.table-sm.text-center
            thead
                tr
                    //- th #
                    th Name
                    th Email
                    th Role
                    th Major
                    th Date
                    th Active
                    th Edit
                    th Delete
            
            tbody
            
                each currentUser in users
                
                    //- modal to delete element
                    +deleteModalTemplate(currentUser.id, title, `${currentUser.firstName} ${currentUser.lastName} - Email: ${currentUser.email}`)
                    
                    -const active = currentUser.active ? 'Yes' : 'No'
                    -const role = currentUser.role == 'team-maintenance' ? 'Team Maintenance' : currentUser.role.charAt(0).toUpperCase() + currentUser.role.slice(1).toLowerCase();
                    
                        tr
                            //- th= index+1
                            td= `${currentUser.firstName} ${currentUser.lastName}`
                            td= currentUser.email
                            td= role
                            td= currentUser.major
                            td= currentUser.createdAt
                            td= active
                            td
                                a.btn.btn-success.text-white(href=`/manage_users/${currentUser.id}/edit_user`) Edit
                            td
                                a.btn.btn-danger.text-white(type='button' data-toggle="modal" data-target=`#deleteModal${currentUser.id}`) Delete
            tfoot
                tr
                    //- th #
                    th Name
                    th Email
                    th Role
                    th Major
                    th Date
                    th Active
                    th Edit
                    th Delete                    
